<article class="markdown">
  <h1>
  <nz-space>
    <span *nzSpaceItem>å®šåˆ¶ä¸»é¢˜</span>
    <span *nzSpaceItem></span>
	</nz-space>
</h1>

<nz-affix class="toc-affix" [nzOffsetTop]="16">
  <nz-anchor [nzAffix]="false" nzShowInkInFixed (nzClick)="goLink($event)">
    <nz-link nzHref="#ä½¿ç”¨é¢„å®šä¹‰ä¸»é¢˜" class="toc-indent-1" nzTitle="ä½¿ç”¨é¢„å®šä¹‰ä¸»é¢˜"></nz-link>
<nz-link nzHref="#é…ç½®éå®šåˆ¶ä¸»é¢˜" class="toc-indent-2" nzTitle="é…ç½®éå®šåˆ¶ä¸»é¢˜"></nz-link>
<nz-link nzHref="#å®˜æ–¹ä¸»é¢˜" class="toc-indent-2" nzTitle="å®˜æ–¹ä¸»é¢˜"></nz-link>
<nz-link nzHref="#ä¿®æ”¹é¢„å®šä¹‰ä¸»é¢˜" class="toc-indent-1" nzTitle="ä¿®æ”¹é¢„å®šä¹‰ä¸»é¢˜"></nz-link>
<nz-link nzHref="#æ–¹å¼ä¸€ï¼šåœ¨-less-ä¸­è¦†ç›–ä¸»é¢˜å˜é‡" class="toc-indent-2" nzTitle="æ–¹å¼ä¸€ï¼šåœ¨ Less ä¸­è¦†ç›–ä¸»é¢˜å˜é‡"></nz-link>
<nz-link nzHref="#æ–¹å¼äºŒï¼šwebpack-ä¸­è¦†ç›–ä¸»é¢˜å˜é‡" class="toc-indent-2" nzTitle="æ–¹å¼äºŒï¼šwebpack ä¸­è¦†ç›–ä¸»é¢˜å˜é‡"></nz-link>
<nz-link nzHref="#åŠ¨æ€åˆ‡æ¢ä¸»é¢˜" class="toc-indent-1" nzTitle="åŠ¨æ€åˆ‡æ¢ä¸»é¢˜"></nz-link>
<nz-link nzHref="#é…ç½®-angular-json-æ–‡ä»¶" class="toc-indent-2" nzTitle="é…ç½® angular.json æ–‡ä»¶"></nz-link>
<nz-link nzHref="#å¤šä¸»é¢˜å®šåˆ¶" class="toc-indent-2" nzTitle="å¤šä¸»é¢˜å®šåˆ¶"></nz-link>
<nz-link nzHref="#åˆ‡æ¢ä¸»é¢˜" class="toc-indent-2" nzTitle="åˆ‡æ¢ä¸»é¢˜"></nz-link>
<nz-link nzHref="#q&a" class="toc-indent-1" nzTitle="Q&A"></nz-link>
  </nz-anchor>
</nz-affix>
  <section class="markdown" ngNonBindable><p>Ant Design è®¾è®¡è§„èŒƒä¸Šæ”¯æŒä¸€å®šç¨‹åº¦çš„æ ·å¼å®šåˆ¶ï¼Œä»¥æ»¡è¶³ä¸šåŠ¡å’Œå“ç‰Œä¸Šå¤šæ ·åŒ–çš„è§†è§‰éœ€æ±‚ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä¸»è‰²ã€åœ†è§’ã€è¾¹æ¡†å’Œéƒ¨åˆ†ç»„ä»¶çš„è§†è§‰å®šåˆ¶ã€‚</p>
<p><img src="https://zos.alipayobjects.com/rmsportal/zTFoszBtDODhXfLAazfSpYbSLSEeytoG.png" alt="Example"></p>
<p>Ant Design çš„æ ·å¼ä½¿ç”¨äº† <a href="https://lesscss.org/" target="_blank" rel="noopener">Less</a> ä½œä¸ºå¼€å‘è¯­è¨€ï¼Œå¹¶å®šä¹‰äº†ä¸€ç³»åˆ—å…¨å±€/ç»„ä»¶çš„æ ·å¼å˜é‡ï¼Œä½ å¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œç›¸åº”è°ƒæ•´ï¼Œ<a href="https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/components/style/themes/default.less" target="_blank" rel="noopener">é»˜è®¤æ ·å¼å˜é‡</a></p>
<blockquote>
<p>Ant Design React çš„ä¸»é¢˜å®šåˆ¶æ–‡ä»¶åœ¨ <code>ng-zorro-antd</code> ä¸­åŒæ ·å¯ä»¥ä½¿ç”¨ã€‚</p>
</blockquote>
<h2 id="ä½¿ç”¨é¢„å®šä¹‰ä¸»é¢˜"><span>ä½¿ç”¨é¢„å®šä¹‰ä¸»é¢˜</span><a onclick="window.location.hash = 'ä½¿ç”¨é¢„å®šä¹‰ä¸»é¢˜'" class="anchor">#</a></h2><h3 id="é…ç½®éå®šåˆ¶ä¸»é¢˜"><span>é…ç½®éå®šåˆ¶ä¸»é¢˜</span><a onclick="window.location.hash = 'é…ç½®éå®šåˆ¶ä¸»é¢˜'" class="anchor">#</a></h3><p>åœ¨åˆå§‹åŒ–é¡¹ç›®æ—¶ï¼Œè¿è¡Œ <code>ng add ng-zorro-antd</code> å‘½ä»¤ä¹‹åï¼Œé€‰æ‹©ä¸é…ç½®è‡ªå®šä¹‰ä¸»é¢˜æ–‡ä»¶ï¼Œä½ çš„é¡¹ç›®åˆ™ä¼šè‡ªåŠ¨åœ¨ <code>angular.json</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./node_modules/ng-zorro-antd/ng-zorro-antd.min.css"</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</code></pre><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ <code>angular.json</code> ä¸­æ‰‹åŠ¨æ·»åŠ è¯¥é…ç½®ã€‚</p>
<h3 id="å®˜æ–¹ä¸»é¢˜"><span>å®˜æ–¹ä¸»é¢˜</span><a onclick="window.location.hash = 'å®˜æ–¹ä¸»é¢˜'" class="anchor">#</a></h3><p>é™¤äº†é»˜è®¤ä¸»é¢˜å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¸‰ç§å®˜æ–¹ä¸»é¢˜ï¼Œæ¬¢è¿åœ¨é¡¹ç›®ä¸­è¯•ç”¨ï¼Œå¹¶ä¸”ç»™æˆ‘ä»¬æä¾›åé¦ˆã€‚</p>
<ul>
<li>ğŸŒ‘ æš—é»‘ä¸»é¢˜</li>
<li>ğŸ“¦ ç´§å‡‘ä¸»é¢˜</li>
<li>â˜ï¸ é˜¿é‡Œäº‘ä¸»é¢˜</li>
</ul>
<h4 id="æ–¹å¼ä¸€ï¼š_less"><span>æ–¹å¼ä¸€ï¼š Less</span><a onclick="window.location.hash = 'æ–¹å¼ä¸€ï¼š_less'" class="anchor">#</a></h4><p>åœ¨æ ·å¼æ–‡ä»¶å…¨é‡ï¼Œå¦‚ <code>style.less</code>ï¼Œä¸­å¼•å…¥ <code>ng-zorro-antd.less</code>ã€<code>ng-zorro-antd.dark.less</code>ã€<code>ng-zorro-antd.compact.less</code> æˆ– <code>ng-zorro-antd.aliyun.less</code> è¦†ç›–ä¸»é¢˜å˜é‡ã€‚</p>
<pre><code class="language-less"><span class="token comment">// å¼•å…¥å®˜æ–¹æä¾›çš„é»˜è®¤ less æ ·å¼æ–‡ä»¶</span>
<span class="token variable">&#64;import</span> <span class="token string">'~ng-zorro-antd/ng-zorro-antd.less'</span><span class="token punctuation">;</span>

<span class="token comment">// å¼•å…¥å®˜æ–¹æä¾›çš„æš—é»‘ less æ ·å¼æ–‡ä»¶</span>
<span class="token comment">//&#64;import "~ng-zorro-antd/ng-zorro-antd.dark.less";</span>

<span class="token comment">// å¼•å…¥å®˜æ–¹æä¾›çš„ç´§å‡‘ less æ ·å¼æ–‡ä»¶</span>
<span class="token comment">//&#64;import "~ng-zorro-antd/ng-zorro-antd.compact.less";</span>

<span class="token comment">// å¼•å…¥å®˜æ–¹æä¾›çš„é˜¿é‡Œäº‘ less æ ·å¼æ–‡ä»¶</span>
<span class="token comment">//&#64;import "~ng-zorro-antd/ng-zorro-antd.aliyun.less";</span>
</code></pre><h4 id="æ–¹å¼äºŒ_css"><span>æ–¹å¼äºŒ: CSS</span><a onclick="window.location.hash = 'æ–¹å¼äºŒ_css'" class="anchor">#</a></h4><p>å¦‚æœé¡¹ç›®ä¸ä½¿ç”¨ Lessï¼Œå¯åœ¨ CSS æ–‡ä»¶æˆ–è€… <code>angular.json</code> çš„ <code>styles</code> å­—æ®µä¸­ï¼Œå…¨é‡å¼•å…¥ <code>ng-zorro-antd.css</code>ã€<code>ng-zorro-antd.dark.css</code>ã€<code>ng-zorro-antd.compact.css</code> æˆ–è€… <code>ng-zorro-antd.aliyun.css</code>ã€‚</p>
<p>æ ·å¼æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="language-css"><span class="token atrule"><span class="token rule">&#64;import</span> <span class="token string">'~ng-zorro-antd/ng-zorro-antd.css'</span><span class="token punctuation">;</span></span>
<span class="token comment">/*&#64;import "~ng-zorro-antd/ng-zorro-antd.dark.css";*/</span>
<span class="token comment">/*&#64;import "~ng-zorro-antd/ng-zorro-antd.compact.css";*/</span>
<span class="token comment">/*&#64;import "~ng-zorro-antd/ng-zorro-antd.aliyun.css";*/</span>
</code></pre><p><code>angular.json</code> ä¸­ï¼š</p>
<pre><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"node_modules/ng-zorro-antd/ng-zorro-antd.css"</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</code></pre><h2 id="ä¿®æ”¹é¢„å®šä¹‰ä¸»é¢˜"><span>ä¿®æ”¹é¢„å®šä¹‰ä¸»é¢˜</span><a onclick="window.location.hash = 'ä¿®æ”¹é¢„å®šä¹‰ä¸»é¢˜'" class="anchor">#</a></h2><h3 id="æ–¹å¼ä¸€ï¼šåœ¨_less_ä¸­è¦†ç›–ä¸»é¢˜å˜é‡"><span>æ–¹å¼ä¸€ï¼šåœ¨ Less ä¸­è¦†ç›–ä¸»é¢˜å˜é‡</span><a onclick="window.location.hash = 'æ–¹å¼ä¸€ï¼šåœ¨_less_ä¸­è¦†ç›–ä¸»é¢˜å˜é‡'" class="anchor">#</a></h3><h4 id="å¼•å…¥é¢„å®šä¹‰ä¸»é¢˜æ–‡ä»¶"><span>å¼•å…¥é¢„å®šä¹‰ä¸»é¢˜æ–‡ä»¶</span><a onclick="window.location.hash = 'å¼•å…¥é¢„å®šä¹‰ä¸»é¢˜æ–‡ä»¶'" class="anchor">#</a></h4><p>åœ¨ <code>src/styles.less</code> é‡Œå¼•å…¥é¢„å®šä¹‰ä¸»é¢˜æ–‡ä»¶ ï¼ˆä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–é¡¹ç›®è¿è¡Œ <code>ng add ng-zorro-antd</code> å‘½ä»¤ä¹‹åï¼Œé€‰æ‹©é…ç½®è‡ªå®šä¹‰ä¸»é¢˜æ–‡ä»¶ï¼‰ï¼š</p>
<pre><code class="language-less"><span class="token comment">// Custom Theming for NG-ZORRO</span>
<span class="token comment">// For more information: https://ng.ant.design/docs/customize-theme/en</span>
<span class="token variable">&#64;import</span> <span class="token string">'../node_modules/ng-zorro-antd/ng-zorro-antd.less'</span><span class="token punctuation">;</span>
</code></pre><h4 id="è‡ªå®šä¹‰æ ·å¼å˜é‡"><span>è‡ªå®šä¹‰æ ·å¼å˜é‡</span><a onclick="window.location.hash = 'è‡ªå®šä¹‰æ ·å¼å˜é‡'" class="anchor">#</a></h4><p>å¼•å…¥å®˜æ–¹ä¸»é¢˜æ–‡ä»¶ä¹‹åï¼Œå†æ ¹æ®å®é™…éœ€æ±‚è‡ªå®šä¹‰è¦†ç›–ä¸»é¢˜æ ·å¼å˜é‡çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹æ ·ä¾‹ä¸­é€šè¿‡ä¿®æ”¹ <code>&#64;primary-color</code> çš„æ•°å€¼å°†é¢„å®šä¹‰é»˜è®¤ä¸»é¢˜çš„åŸºç¡€è‰²ä¿®æ”¹ä¸º <code>#f5222d</code>ï¼š</p>
<pre><code class="language-less"><span class="token comment">// -------- å¼•å…¥å®˜æ–¹æä¾›çš„ less æ ·å¼å…¥å£æ–‡ä»¶ -----------</span>
<span class="token variable">&#64;import</span> <span class="token string">'../node_modules/ng-zorro-antd/ng-zorro-antd.less'</span><span class="token punctuation">;</span>

<span class="token comment">// -------- è‡ªå®šä¹‰å‚æ•°è¦†ç›– -----------</span>
<span class="token variable">&#64;primary-color<span class="token punctuation">:</span></span> #f5222d<span class="token punctuation">;</span>
</code></pre><h3 id="æ–¹å¼äºŒï¼šwebpack_ä¸­è¦†ç›–ä¸»é¢˜å˜é‡"><span>æ–¹å¼äºŒï¼šwebpack ä¸­è¦†ç›–ä¸»é¢˜å˜é‡</span><a onclick="window.location.hash = 'æ–¹å¼äºŒï¼šwebpack_ä¸­è¦†ç›–ä¸»é¢˜å˜é‡'" class="anchor">#</a></h3><h4 id="è¦†ç›–ä¸ºé¢„å®šä¹‰ä¸»é¢˜å˜é‡"><span>è¦†ç›–ä¸ºé¢„å®šä¹‰ä¸»é¢˜å˜é‡</span><a onclick="window.location.hash = 'è¦†ç›–ä¸ºé¢„å®šä¹‰ä¸»é¢˜å˜é‡'" class="anchor">#</a></h4><p>åœ¨ webpack ä¸­ä½¿ç”¨ less-loader æŒ‰éœ€å¼•å…¥ï¼š</p>
<pre><code class="language-javascript"><span class="token keyword">const</span> darkThemeVars <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ng-zorro-antd/dark-theme'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compactThemeVars <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ng-zorro-antd/compact-theme'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token literal-property property">modifyVars</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">hack</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">true;&#64;import "</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'ng-zorro-antd/style/color/colorPalette.less'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">";</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token operator">...</span>darkThemeVars<span class="token punctuation">,</span>
            <span class="token operator">...</span>compactThemeVars
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">javascriptEnabled</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</code></pre><h4 id="è¦†ç›–ä¸ºå®šåˆ¶ä¸»é¢˜å˜é‡"><span>è¦†ç›–ä¸ºå®šåˆ¶ä¸»é¢˜å˜é‡</span><a onclick="window.location.hash = 'è¦†ç›–ä¸ºå®šåˆ¶ä¸»é¢˜å˜é‡'" class="anchor">#</a></h4><p>Angular CLI æä¾›äº† <a href="https://www.npmjs.com/package/&#64;angular-builders/custom-webpack" target="_blank" rel="noopener">custom-webpack</a> çš„ builderï¼Œå¯ä»¥é€šè¿‡è¯¥ builder è½»æ¾çš„è°ƒæ•´ webpack ä¸­ <a href="https://github.com/webpack-contrib/less-loader" target="_blank" rel="noopener">less-loader</a> çš„é…ç½®æ¥è¿›è¡Œä¸»é¢˜é…ç½®ã€‚</p>
<ol>
<li><p>åœ¨ <code>angular.json</code> ä¸­å¼•å…¥ <code>ng-zorro-antd.less</code> æ–‡ä»¶</p>
<pre><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"node_modules/ng-zorro-antd/ng-zorro-antd.less"</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>
</code></pre></li>
<li><p>å®‰è£… <code>&#64;angular-builders/custom-webpack</code> builder</p>
<pre><code class="language-bash"><span class="token function">npm</span> i -D &#64;angular-builders/custom-webpack
</code></pre></li>
<li><p>æ–°å»º webpack é…ç½®æ–‡ä»¶ <code>extra-webpack.config.js</code></p>
<pre><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
          <span class="token literal-property property">modifyVars</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// ä¿®æ”¹ä¸»é¢˜å˜é‡</span>
            <span class="token string-property property">'primary-color'</span><span class="token operator">:</span> <span class="token string">'#1DA57A'</span><span class="token punctuation">,</span>
            <span class="token string-property property">'link-color'</span><span class="token operator">:</span> <span class="token string">'#1DA57A'</span><span class="token punctuation">,</span>
            <span class="token string-property property">'border-radius-base'</span><span class="token operator">:</span> <span class="token string">'2px'</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">javascriptEnabled</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</code></pre></li>
<li><p>åœ¨ <code>angular.json</code> ä¸­é…ç½®è‡ªå®šä¹‰ builder</p>
<pre><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> "architect": &#123;
</span><span class="token prefix unchanged"> </span><span class="token line">   "build": &#123;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     "builder": "&#64;angular-devkit/build-angular:browser",
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     "builder": "&#64;angular-builders/custom-webpack:browser",
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     "options": &#123;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        "customWebpackConfig": &#123;
</span><span class="token prefix inserted">+</span><span class="token line">          "path": "./extra-webpack.config.js",
</span><span class="token prefix inserted">+</span><span class="token line">          "mergeStrategies": &#123;
</span><span class="token prefix inserted">+</span><span class="token line">            "module.rules": "append"
</span><span class="token prefix inserted">+</span><span class="token line">          &#125;,
</span><span class="token prefix inserted">+</span><span class="token line">          "replaceDuplicatePlugins": true
</span><span class="token prefix inserted">+</span><span class="token line">        &#125;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &#125;,
</span><span class="token prefix unchanged"> </span><span class="token line">   &#125;,
</span><span class="token prefix unchanged"> </span><span class="token line">   "serve": &#123;
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      "builder": "&#64;angular-devkit/build-angular:dev-server",
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      "builder": "&#64;angular-builders/custom-webpack:dev-server",
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &#125;
</span><span class="token prefix unchanged"> </span><span class="token line"> &#125;</span></span>
</code></pre></li>
</ol>
<p>æ›´å¤šåœ¨ Angular CLI ä¸­å®šåˆ¶ webpack çš„æ–‡ç« å¯ä»¥å‚è€ƒ</p>
<ul>
<li><a href="https://www.npmjs.com/package/&#64;angular-builders/custom-webpack" target="_blank" rel="noopener">Angular Builder Document</a></li>
<li><a href="https://alligator.io/angular/custom-webpack-config/" target="_blank" rel="noopener">Angular CLI: Custom webpack Config</a></li>
<li><a href="https://netbasal.com/customize-webpack-configuration-in-your-angular-application-d09683f6bd22" target="_blank" rel="noopener">Customize Webpack Configuration in Your Angular Application</a></li>
</ul>
<p>å…¨éƒ¨å¯è¢«è‡ªå®šä¹‰ less å˜é‡å¯ä»¥å‚è€ƒ <a href="https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/components/style/themes/default.less" target="_blank" rel="noopener">è¿™é‡Œ</a>ã€‚</p>
<h2 id="åŠ¨æ€åˆ‡æ¢ä¸»é¢˜"><span>åŠ¨æ€åˆ‡æ¢ä¸»é¢˜</span><a onclick="window.location.hash = 'åŠ¨æ€åˆ‡æ¢ä¸»é¢˜'" class="anchor">#</a></h2><p>æˆ‘ä»¬ä¸ºä½ å‡†å¤‡äº†ä¸€ä¸ªæ¼”ç¤ºåŠ¨æ€åˆ‡æ¢ä¸»é¢˜çš„é¡¹ç›®ï¼Œæ¬¢è¿å‰å¾€ <a href="https://github.com/yangjunhan/nz-themes" target="_blank" rel="noopener">è¿™é‡Œ</a> æŸ¥çœ‹ã€‚</p>
<h3 id="é…ç½®_angularjson_æ–‡ä»¶"><span>é…ç½® angular.json æ–‡ä»¶</span><a onclick="window.location.hash = 'é…ç½®_angularjson_æ–‡ä»¶'" class="anchor">#</a></h3><ol>
<li><p>æ ·å¼é¢„å¤„ç†å™¨é€‰é¡¹ <code>stylePreprocessorOptions</code></p>
<p>åœ¨<code>angular.json</code> ä¸­é…ç½®æ ·å¼é¢„å¤„ç†å™¨é€‰é¡¹ <code>stylePreprocessorOptions</code> å¹¶æ·»åŠ è·¯å¾„ï¼š</p>
<pre><code class="language-json"><span class="token property">"stylePreprocessorOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  <span class="token property">"includePaths"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"src/styles/themes"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
</code></pre><p>äºæ˜¯ï¼Œåœ¨é¡¹ç›®ç»„ä»¶æ ·å¼æ–‡ä»¶é‡Œï¼Œæ— éœ€ç›¸å¯¹è·¯å¾„ï¼Œ<code>src/styles/themes</code> è·¯å¾„ä¸‹çš„ä»»æ„æ–‡ä»¶å®šä¹‰æ–‡ä»¶éƒ½å¯ä»¥ä»é¡¹ç›®ä¸­çš„ä»»ä½•ä½ç½®å¯¼å…¥ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-less"><span class="token comment">// A relative path works</span>
<span class="token variable">&#64;import</span> <span class="token string">'src/styles/themes/mixin'</span><span class="token punctuation">;</span>
<span class="token comment">// But now this works as well</span>
<span class="token variable">&#64;import</span> <span class="token string">'mixin'</span><span class="token punctuation">;</span>
</code></pre></li>
<li><p>styles é‡Œçš„ <code>bundleName</code> å’Œ <code>inject</code></p>
<p>å¦‚æœéœ€è¦åœ¨é¡¹ç›®è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢ä¸»é¢˜ï¼Œä½ å°±éœ€è¦ä¸ºæ„å»ºå™¨é…ç½®å¥½æ¯ä¸ªä¸»é¢˜çš„å…¨å±€ä¸Šä¸‹æ–‡æ ·å¼æ–‡ä»¶ã€‚ç»§ç»­ä»¥é»˜è®¤å’Œæš—é»‘ä¸»é¢˜ä¸ºä¾‹ï¼Œè¯·åœ¨ <code>angular.json</code> çš„ <code>styles</code> é€‰é¡¹æ•°ç»„é‡Œè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="language-json"><span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">"src/styles.less"</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span>
    <span class="token property">"input"</span><span class="token operator">:</span> <span class="token string">"src/styles/default.less"</span><span class="token punctuation">,</span>
    <span class="token property">"bundleName"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>
    <span class="token property">"inject"</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span>
    <span class="token property">"input"</span><span class="token operator">:</span> <span class="token string">"src/styles/dark.less"</span><span class="token punctuation">,</span>
    <span class="token property">"bundleName"</span><span class="token operator">:</span> <span class="token string">"dark"</span><span class="token punctuation">,</span>
    <span class="token property">"inject"</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><p><code>bundleName</code> æŒ‡æ†ç»‘åŒ…çš„è‡ªå®šä¹‰ CSS æ–‡ä»¶åç§°ï¼Œæ–¹ä¾¿äº†ä¹‹ååˆ‡æ¢ä¸»é¢˜åˆ›å»ºæ‰€éœ€çš„ link æ ‡ç­¾çš„ href å±æ€§ã€‚<code>inject</code> é»˜è®¤ä¸º <code>true</code>ï¼Œä¼šå°†æ†ç»‘åŒ…æ³¨å…¥ã€‚ä¸ºäº†åŠ¨æ€ä¸»é¢˜åˆ‡æ¢åˆ™éœ€è¦å°†ä¸»é¢˜æ†ç»‘åŒ…ä»æ³¨å…¥ä¸­æ’é™¤ã€‚</p>
</li>
</ol>
<h3 id="å¤šä¸»é¢˜å®šåˆ¶"><span>å¤šä¸»é¢˜å®šåˆ¶</span><a onclick="window.location.hash = 'å¤šä¸»é¢˜å®šåˆ¶'" class="anchor">#</a></h3><p>åœ¨å¤šä¸»é¢˜é¡¹ç›®çš„æƒ…æ™¯ä¸‹ï¼Œæ¯ä¸€ä¸ªä¸»é¢˜éƒ½åº”è¯¥åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„æ ·å¼å…¥å£æ–‡ä»¶ã€‚ä¸ºäº†æ›´å¥½ç®¡ç†å¤šä¸»é¢˜é¡¹ç›®ï¼Œæˆ‘ä»¬æ¨èå°†æ‰€æœ‰ç±»ä¼¼çš„ä¸»é¢˜å®šä¹‰å…¥å£æ–‡ä»¶æ”¾åœ¨ <code>src/styles</code> è·¯å¾„ä¸‹ã€‚ä¾‹å¦‚ï¼Œå½“ä½ çš„é¡¹ç›®æœ‰é»˜è®¤å’Œæš—é»‘ä¸»é¢˜æ—¶ï¼Œä½ çš„é¡¹ç›® styles å¯èƒ½ä¼šæ˜¯ä»¥ä¸‹ç»“æ„ï¼š</p>
<pre>
  src/styles
  â”œâ”€â”€ dark.less
  â”œâ”€â”€ default.less
  â””â”€â”€ themes
      â”œâ”€â”€ base.less
      â”œâ”€â”€ dark.less
      â”œâ”€â”€ default.less
      â””â”€â”€ mixin.less
</pre>

<p><code>src/styles/</code> ä¸‹çš„ä¸»é¢˜æ–‡ä»¶æ˜¯ä¸»é¢˜å…¥å£æ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¼•å…¥é¢„å®šä¹‰å®˜æ–¹ Less æ ·å¼å…¥å£æ–‡ä»¶ä»¥åŠ <code>src/styles/themes/</code> ä¸‹å¯¹åº”çš„ä¸»é¢˜æ ·å¼å®šåˆ¶æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œ<code>src/styles/dark.less</code> å…¥å£æ–‡ä»¶å«æœ‰ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="language-less"><span class="token variable">&#64;import</span> <span class="token string">'../../node_modules/ng-zorro-antd/ng-zorro-antd'</span><span class="token punctuation">;</span>
<span class="token variable">&#64;import</span> <span class="token string">'./themes/dark'</span><span class="token punctuation">;</span>
</code></pre><p>ç›¸åº”çš„ï¼Œ<code>src/styles/themes/dark.less</code> æ–‡ä»¶è´Ÿè´£å®šåˆ¶æš—é»‘ä¸»é¢˜çš„æ ·å¼ï¼š</p>
<pre><code class="language-less"><span class="token variable">&#64;import</span> <span class="token punctuation">(</span>multiple<span class="token punctuation">)</span> <span class="token string">'../../../node_modules/ng-zorro-antd/src/style/themes/dark'</span><span class="token punctuation">;</span>
<span class="token variable">&#64;import</span> <span class="token string">'./base'</span><span class="token punctuation">;</span>

<span class="token variable">&#64;layout-sider-background<span class="token punctuation">:</span></span> <span class="token variable">&#64;component-background</span><span class="token punctuation">;</span>
<span class="token variable">&#64;layout-header-background<span class="token punctuation">:</span></span> <span class="token variable">&#64;component-background</span><span class="token punctuation">;</span>
</code></pre><blockquote>
<p>å½“å¼•å…¥å¯¹åº”çš„é¢„å®šä¹‰ä¸»é¢˜æ ·å¼å˜é‡æ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šé‡åˆ° <code>.less</code> æ ·å¼æ–‡ä»¶åè·Ÿé¡¹ç›®è‡ªå·±çš„ä¸»é¢˜æ ·å¼æ–‡ä»¶åæ˜¯ä¸€æ ·çš„æƒ…å†µï¼Œè¿™æ ·çš„è¯å•å•ä½¿ç”¨ <code>&#64;import &#39;&lt;url&gt;&#39;;</code> æ˜¯æ— æ³•ç”Ÿæ•ˆçš„ã€‚è¿™ç§æ—¶å€™ï¼Œ Less ä¸ºæˆ‘ä»¬æä¾›äº† <code>&#64;import (multiple) &#39;&lt;url&gt;&#39;;</code> çš„ <code>multiple</code> æ–¹æ³•æ¥å¼•å…¥è¿™äº›åŒåçš„ <code>.less</code> æ–‡ä»¶ã€‚</p>
</blockquote>
<p>æ³¨æ„ï¼Œå¦‚æœå­˜åœ¨æ‰€æœ‰ä¸»é¢˜é€šç”¨çš„æ ·å¼å˜é‡ï¼Œè¿˜å¯ä»¥å¼•å…¥ä¸€ä¸ªç»Ÿä¸€çš„ <code>base.less</code> åŸºæœ¬æ ·å¼æ–‡ä»¶å¹¶åœ¨æ¯ä¸ªä¸»é¢˜æ ·å¼å®šåˆ¶æ–‡ä»¶ä¸­å¼•å…¥å®ƒï¼š</p>
<pre><code class="language-less"><span class="token comment">// base.less å®šåˆ¶é€šç”¨æ ·å¼å˜é‡</span>
<span class="token variable">&#64;margin-md<span class="token punctuation">:</span></span> 17px<span class="token punctuation">;</span>
</code></pre><h3 id="åˆ‡æ¢ä¸»é¢˜"><span>åˆ‡æ¢ä¸»é¢˜</span><a onclick="window.location.hash = 'åˆ‡æ¢ä¸»é¢˜'" class="anchor">#</a></h3><p>åˆ‡æ¢ä¸»é¢˜åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œä¸€æ˜¯åˆ‡æ¢é¡¹ç›®ç»„ä»¶ä¸»é¢˜ï¼ŒäºŒæ˜¯åˆ‡æ¢é¢„å®šä¹‰ä¸»é¢˜ã€‚</p>
<h4 id="åˆ‡æ¢é¡¹ç›®ç»„ä»¶ä¸»é¢˜"><span>åˆ‡æ¢é¡¹ç›®ç»„ä»¶ä¸»é¢˜</span><a onclick="window.location.hash = 'åˆ‡æ¢é¡¹ç›®ç»„ä»¶ä¸»é¢˜'" class="anchor">#</a></h4><p>Angular ç›®å‰é»˜è®¤çš„æ¨¡æ¿å’Œ CSS æ ·å¼ä½¿ç”¨çš„æ ·å¼å°è£…ç­–ç•¥æ˜¯ <code>ViewEncapsulation.Emulated</code>ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨å«ç‰‡ CSS æ¥æ¨¡æ‹ŸåŸç”Ÿè¡Œä¸ºã€‚æ ¹æ®ä¸åŒçš„æ ·å¼å°è£…ç­–ç•¥ï¼ŒAngular ä¼šå°†é¡¹ç›®ç»„ä»¶æ ·å¼ä»¥ä¸åŒæ–¹å¼æ‰“åŒ…è¿› JS æ–‡ä»¶é‡Œã€‚</p>
<p>åˆ‡æ¢é¡¹ç›®ç»„ä»¶ä¸»é¢˜çš„ç­–ç•¥æ˜¯åœ¨å®šåˆ¶é¡¹ç›®ç»„ä»¶æ ·å¼æ—¶ï¼Œä¼šé€šè¿‡ html é‡Œçš„ä»£è¡¨ä¸»é¢˜ class çš„ <code>className</code>ï¼Œä¾‹å¦‚ <code>default</code> å’Œ <code>dark</code>ï¼Œä»¥åˆ‡æ¢æ‰“åŒ…å¥½çš„ä¸»é¢˜ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨æ¯ä¸€ä¸ªé¡¹ç›®ç»„ä»¶æ ·å¼æ–‡ä»¶é‡Œæ ¹æ®ä»¥ä¸‹æ ¼å¼å†™æ ·å¼ä¼šå¾ˆç¹çï¼š</p>
<pre><code class="language-less"><span class="token selector">html</span> <span class="token punctuation">&#123;</span>
  <span class="token selector">&amp;.default</span> <span class="token punctuation">&#123;</span>
    <span class="token variable">&#64;import</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
    <span class="token comment">// ç»„ä»¶æ ·å¼</span>
    ...<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token selector">&amp;.dark</span> <span class="token punctuation">&#123;</span>
    <span class="token variable">&#64;import</span> <span class="token string">'dark'</span><span class="token punctuation">;</span>
    <span class="token comment">// ç»„ä»¶æ ·å¼</span>
    ...<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</code></pre><blockquote>
<p>æ³¨æ„ï¼Œç”±äºå·²ç»é…ç½®äº†æ ·å¼é¢„å¤„ç†å™¨é€‰é¡¹ <code>stylePreprocessorOptions</code> é‡Œçš„è·¯å¾„ <code>src/styles/themes</code>ï¼Œè¿™é‡Œçš„ <code>&#64;import</code> ä¸éœ€è¦å®Œæ•´çš„ç›¸å¯¹è·¯å¾„ã€‚</p>
</blockquote>
<p>æ›´å¥½çš„å®ç°æ–¹å¼æ˜¯ï¼Œåœ¨ä¸Šæ–‡æåˆ°çš„ <code>mixin.less</code> ä¸­å®šä¹‰ä¸€ä¸ª Mixin <code>.themeMixin(&#64;rules)</code>ï¼š</p>
<pre><code class="language-less"><span class="token selector">.themeMixin(<span class="token variable">&#64;rules</span>)</span> <span class="token punctuation">&#123;</span>
  <span class="token selector">html</span> <span class="token punctuation">&#123;</span>
    <span class="token selector">&amp;.default</span> <span class="token punctuation">&#123;</span>
      <span class="token variable">&#64;import</span> <span class="token string">'./default.less'</span><span class="token punctuation">;</span>
      <span class="token variable">&#64;rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token selector">&amp;.dark</span> <span class="token punctuation">&#123;</span>
      <span class="token variable">&#64;import</span> <span class="token string">'./dark.less'</span><span class="token punctuation">;</span>
      <span class="token variable">&#64;rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</code></pre><p>å¹¶åœ¨æ‰€æœ‰çš„é¡¹ç›®ç»„ä»¶æ ·å¼æ–‡ä»¶é‡Œï¼Œåªéœ€è¦å°†æ‰€æœ‰æ ·å¼ä¼ å…¥ <code>.themeMixin(&#64;rules)</code> é‡Œå³å¯ï¼š</p>
<pre><code class="language-less"><span class="token variable">&#64;import</span> <span class="token string">'mixin'</span><span class="token punctuation">;</span> <span class="token comment">// åŒæ ·çš„ï¼Œä¸éœ€è¦å®Œæ•´çš„ç›¸å¯¹è·¯å¾„</span>

.themeMixin<span class="token selector">(</span><span class="token punctuation">&#123;</span>
  <span class="token selector">:host</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ç»„ä»¶æ ·å¼</span>
    ...
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h4 id="åˆ‡æ¢é¢„å®šä¹‰ä¸»é¢˜"><span>åˆ‡æ¢é¢„å®šä¹‰ä¸»é¢˜</span><a onclick="window.location.hash = 'åˆ‡æ¢é¢„å®šä¹‰ä¸»é¢˜'" class="anchor">#</a></h4><p>åˆ‡æ¢é¢„å®šä¹‰ä¸»é¢˜æ ·å¼æ–‡ä»¶åˆ™æ˜¯éœ€è¦åŠ¨æ€åˆ›å»º <code>link</code> æ ‡ç­¾ï¼Œå°†æ ·å¼æ–‡ä»¶åŠ¨æ€åŠ è½½åœ¨åº”ç”¨ä¸­ï¼Œå¹¶ç§»é™¤ä¸Šä¸ªä¸»é¢˜çš„ <code>link</code> æ ‡ç­¾ã€‚</p>
<pre><code class="language-ts"><span class="token keyword">private</span> <span class="token function">loadCss</span><span class="token punctuation">(</span>href<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Event<span class="token operator">></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> style <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'link'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    style<span class="token punctuation">.</span>rel <span class="token operator">=</span> <span class="token string">'stylesheet'</span><span class="token punctuation">;</span>
    style<span class="token punctuation">.</span>href <span class="token operator">=</span> href<span class="token punctuation">;</span>
    style<span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    style<span class="token punctuation">.</span>onload <span class="token operator">=</span> resolve<span class="token punctuation">;</span>
    style<span class="token punctuation">.</span>onerror <span class="token operator">=</span> reject<span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
</code></pre><p>è¿™é‡Œçš„ <code>href</code> å°†æŒ‡ä»£ä¸Šæ–‡é…ç½®çš„<a href="/docs/customize-theme/zh#%E9%85%8D%E7%BD%AE-angular-json-%E6%96%87%E4%BB%B6">æ†ç»‘åŒ…</a>çš„è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ <code>bundleName</code>çš„è·¯å¾„ã€‚</p>
<h4 id="åŒæ­¥ä¸¤ç§ä¸»é¢˜åˆ‡æ¢"><span>åŒæ­¥ä¸¤ç§ä¸»é¢˜åˆ‡æ¢</span><a onclick="window.location.hash = 'åŒæ­¥ä¸¤ç§ä¸»é¢˜åˆ‡æ¢'" class="anchor">#</a></h4><p>é¡¹ç›®ç»„ä»¶æ ·å¼ä¼šè¢«æ‰“åŒ…è¿› js æ–‡ä»¶ï¼Œå› æ­¤åœ¨åˆ‡æ¢ html çš„ <code>className</code> çš„æ—¶å€™ä¸»é¢˜æ ·å¼ä¼šç«‹å³ç”Ÿæ•ˆã€‚å¦ä¸€æ–¹é¢ï¼ŒåŠ¨æ€åœ°åŠ è½½ CSS é¢„å®šä¹‰ä¸»é¢˜æ–‡ä»¶å´æ˜¯éœ€è¦æ—¶é—´å®Œæˆçš„ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œåŒæ—¶è¿›è¡Œï¼Œé¡µé¢åˆ™ä¼šå‡ºç°ä¸€éƒ¨åˆ†æ˜¯ç«‹å³ç”Ÿæ•ˆçš„é¡¹ç›®ç»„ä»¶æ ·å¼ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯åˆ‡æ¢ä¸»é¢˜åŠ è½½ä¹‹å‰çš„æ ·å¼ã€‚å› æ­¤ï¼Œæ•´ä¸ªåˆ‡æ¢ä¸»é¢˜ <code>className</code> æ“ä½œéœ€è¦åŒ…è£¹åœ¨ <code>Promise</code> é‡Œç­‰å¾… CSS æ–‡ä»¶åŠ è½½å®Œæˆåæ‰æ‰§è¡Œã€‚</p>
<pre><code class="language-ts"><span class="token keyword">private</span> <span class="token function">removeUnusedTheme</span><span class="token punctuation">(</span>theme<span class="token operator">:</span> ThemeType<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">&#123;</span>
  document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>theme<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> removedThemeStyle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>theme<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>removedThemeStyle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>removedThemeStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">loadTheme</span><span class="token punctuation">(</span>firstLoad <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Event<span class="token operator">></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentTheme<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>firstLoad<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>theme<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadCss</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>theme<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">.css</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> theme<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    e <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>firstLoad<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>theme<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeUnusedTheme</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>previousTheme<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    e <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
</code></pre><p>æ³¨æ„ï¼šç¬¬ä¸€æ¬¡åŠ è½½é¦–å…ˆéœ€è¦å…ˆå°†ç”¨æˆ·é»˜è®¤çš„é¡¹ç›®ç»„ä»¶ä¸»é¢˜åŠ å…¥ html é‡Œï¼Œè€Œä¸æ˜¯åŒ…è¿› Promise é‡Œï¼Œå¦åˆ™å¼€å§‹æœ‰ä¸€æ®µæ—¶é—´ä¼šå‡ºç°æ²¡æœ‰ä¸»é¢˜ <code>className</code> çš„æƒ…å†µã€‚</p>
<h2 id="qandamp;a"><span>Q&amp;A</span><a onclick="window.location.hash = 'qandamp;a'" class="anchor">#</a></h2></section>
</article>